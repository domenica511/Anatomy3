<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тести</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <style>
        :root { --primary: #0d6efd; --dark: #212529; --light: #f8f9fa; }
        .dark-mode { --primary: #4dabf7; --dark: #f8f9fa; --light: #212529; }
        body { background: var(--light); color: var(--dark); transition: all 0.3s; }
        .quiz-container { max-width: 700px; margin: 40px auto; padding: 30px; background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .quiz-question { font-size: 1.3rem; font-weight: 600; margin-bottom: 25px; }
        .option { padding: 15px; margin: 10px 0; border: 2px solid #dee2e6; border-radius: 10px; cursor: pointer; transition: all 0.2s; }
        .option:hover { border-color: var(--primary); background: #f8f9ff; }
        .option.selected { background: #e3f2fd; border-color: var(--primary); }
        .btn-next { margin-top: 30px; }
        .result { text-align: center; font-size: 1.5rem; margin: 30px 0; font-weight: bold; }
        .progress { height: 10px; margin-bottom: 20px; }
        .dark-mode .quiz-container { background: #2c3034; color: #e9ecef; }
        .dark-mode .option { background: #343a40; border-color: #495057; color: #e9ecef; }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
    <div class="container">
        <a class="navbar-brand" href="index.html"><i class="fas fa-book-open"></i> Реалії в перекладі</a>
        <div class="ms-auto d-flex align-items-center">
            <i class="fas fa-moon theme-toggle" id="themeToggle"></i>
        </div>
    </div>
</nav>

<div class="container quiz-container" data-aos="fade-up">
    <div class="progress">
        <div class="progress-bar" id="progressBar" style="width: 0%"></div>
    </div>
    <div id="quiz"></div>
    <div id="result" class="result" style="display: none;"></div>
    <button class="btn btn-primary btn-next" id="nextBtn" style="display: none;" onclick="nextQuestion()">Далі</button>
    <button class="btn btn-success" id="restartBtn" style="display: none;" onclick="restartQuiz()">Пройти ще раз</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<script>
    AOS.init();

    let questions = JSON.parse(localStorage.getItem('quiz') || '[]');
    if (questions.length === 0) {
        questions = [
            { question: "Що таке реалія?", options: ["Культурно-специфічний елемент", "Граматика", "Фонетика", "Синтаксис"], correct: 0 },
            { question: "Яка стратегія адаптує текст до читача?", options: ["Форенізація", "Доместикація", "Транслітерація", "Опущення"], correct: 1 },
            { question: "Як перекладається 'haggis'?", options: ["haggis", "традиційна шотландська страва", "м’ясний пиріг", "суп"], correct: 1 },
            { question: "Хто такі 'resurrection men'?", options: ["Медики", "Грабіжники могил", "Вчителі", "Поліцейські"], correct: 1 },
            { question: "Що таке 'anatomical theatre'?", options: ["Театр", "Місце для розтинів", "Лекційна зала", "Бібліотека"], correct: 1 },
            { question: "Який прийом зберігає оригінальну форму?", options: ["Доместикація", "Форенізація", "Опис", "Примітка"], correct: 1 },
            { question: "Що таке 'laudanum'?", options: ["Знеболювальне", "Їжа", "Напій", "Інструмент"], correct: 0 },
            { question: "Яка епідемія згадується в романі?", options: ["Чума", "Холера", "Віспа", "Грип"], correct: 1 },
            { question: "Що таке 'Burke and Hare'?", options: ["Лікарі", "Вбивці-постачальники тіл", "Письменники", "Політики"], correct: 1 },
            { question: "Яка тканина — символ Шотландії?", options: ["Шовк", "Тартан", "Льон", "Бавовна"], correct: 1 }
        ];
        localStorage.setItem('quiz', JSON.stringify(questions));
    }

    let current = 0, score = 0, selected = null;

    function loadQuestion() {
        const q = questions[current];
        document.getElementById('quiz').innerHTML = `
            <div class="quiz-question">${q.question}</div>
            ${q.options.map((opt, i) => `<div class="option" onclick="selectOption(${i})">${opt}</div>`).join('')}
        `;
        document.getElementById('progressBar').style.width = `${((current + 1) / questions.length) * 100}%`;
        document.getElementById('nextBtn').style.display = 'none';
    }

    function selectOption(i) {
        document.querySelectorAll('.option').forEach((el, idx) => el.classList.toggle('selected', idx === i));
        selected = i;
        document.getElementById('nextBtn').style.display = 'block';
    }

    function nextQuestion() {
        if (selected === questions[current].correct) score++;
        current++;
        selected = null;
        if (current < questions.length) loadQuestion();
        else showResult();
    }

    function showResult() {
        document.getElementById('quiz').style.display = 'none';
        document.getElementById('nextBtn').style.display = 'none';
        const percent = Math.round((score / questions.length) * 100);
        const msg = percent >= 70 ? 'Відмінно!' : percent >= 50 ? 'Добре!' : 'Спробуйте ще раз!';
        document.getElementById('result').innerHTML = `<div class="text-success">${msg}</div><div>Правильних: ${score} з ${questions.length} (${percent}%)</div>`;
        document.getElementById('result').style.display = 'block';
        document.getElementById('restartBtn').style.display = 'block';
    }

    function restartQuiz() {
        current = 0; score = 0; selected = null;
        document.getElementById('result').style.display = 'none';
        document.getElementById('restartBtn').style.display = 'none';
        document.getElementById('quiz').style.display = 'block';
        loadQuestion();
    }

    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;
    if (localStorage.getItem('theme') === 'dark') body.classList.add('dark-mode');
    themeToggle.classList.add(localStorage.getItem('theme') === 'dark' ? 'fa-sun' : 'fa-moon');
    themeToggle.addEventListener('click', () => {
        body.classList.toggle('dark-mode');
        const isDark = body.classList.contains('dark-mode');
        themeToggle.classList.toggle('fa-moon', !isDark);
        themeToggle.classList.toggle('fa-sun', isDark);
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    loadQuestion();
</script>
</body>
</html>